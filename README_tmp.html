<!DOCTYPE html>
<html>

<head>
    <title>README.md</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    
<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

html,footer,header{
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Custom MD PDF CSS
 */
html,footer,header{
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";

 }
body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>
<link rel="stylesheet" href="file:///Users/kiel/OneTrianggle/R%3A%5C2.Travail%5C1.Enseignement%5CCours%5C_1.Outils%5C2.Developpement%5C1.SCSS%5Cmain.css" type="text/css"><link rel="stylesheet" href="file:///Users/kiel/OneTrianggle/D%3A%5Crdaros%5CCours%5C_1.Outils%5C2.Developpement%5C1.SCSS%5Cmain.css" type="text/css">
</head>

<body>
    <h1 id="onetriangle">OneTriangle</h1>
<p><strong>No-Loss Gamified Savings Protocol on OneChain</strong></p>
<p>OneTriangle transforms passive DeFi savings into an engaging strategy game. Users deposit USDC into Rock, Paper, or Scissors factions, compete for yield using game theory, and always receive 100% of their principal back—regardless of outcome.</p>
<h2 id="game-mechanics">Game Mechanics</h2>
<h3 id="the-factions">The Factions</h3>
<ul>
<li><strong>Rock</strong> → Beats Scissors, loses to Paper</li>
<li><strong>Paper</strong> → Beats Rock, loses to Scissors</li>
<li><strong>Scissors</strong> → Beats Paper, loses to Rock</li>
</ul>
<h3 id="winning-formula-target---predator">Winning Formula: Target - Predator</h3>
<p>The faction with the highest score wins all yield for that epoch. Scores are calculated using pool percentages:</p>
<pre class="hljs"><code><div>Rock Score     = (Scissors % TVL) - (Paper % TVL)
Paper Score    = (Rock % TVL) - (Scissors % TVL)
Scissors Score = (Paper % TVL) - (Rock % TVL)
</div></code></pre>
<p><strong>Example:</strong></p>
<ul>
<li>Rock pool: 45% | Paper pool: 30% | Scissors pool: 25%</li>
<li>Rock: 25 - 30 = <strong>-5</strong> (loses)</li>
<li>Paper: 45 - 25 = <strong>+20</strong> (wins)</li>
<li>Scissors: 30 - 45 = <strong>-15</strong> (loses)</li>
</ul>
<p><strong>Strategy:</strong> Target the largest pool while avoiding your predator.</p>
<h3 id="epoch-cycle-3-days">Epoch Cycle (3 Days)</h3>
<ol>
<li><strong>Deposit Phase</strong> → Users deposit and choose faction</li>
<li><strong>Lock Phase</strong> → Funds locked, yield generated</li>
<li><strong>Settlement</strong> → Smart contract calculates winner</li>
<li><strong>Distribution</strong> → Winners get principal + yield share, losers get principal</li>
</ol>
<h2 id="deployment-onechain-testnet">Deployment (OneChain Testnet)</h2>
<p><strong>Status:</strong>  LIVE | <strong>Epoch 1 ends:</strong> November 28, 2025 08:57:59 UTC</p>
<pre class="hljs"><code><div>Package ID:     0xbe5ff682041431df2eb1033bee50f8ee81708dd74084b48ec8a69d490ba68762
GameVault ID:   0xbeeb3463d50eec7704cd8b8bb8443f4eda38116c1bc8c46b6c240388c77546d9
AdminCap ID:    0x319d5df37bbad14ce35d62ed0bcc389c68fb9877518b9f1443a653efeb2d4c61

Network:        OneChain Testnet
RPC:            https://rpc-testnet.onelabs.cc:443
Transaction:    Q6qe9UBTDeShDVjDdxoJJvWuhZ3FsUvQsUrL6SVxzuU
</div></code></pre>
<h2 id="architecture">Architecture</h2>
<h3 id="smart-contract-move-on-onechain">Smart Contract (Move on OneChain)</h3>
<p><strong>GameVault</strong> - Shared object storing all deposits and game state</p>
<ul>
<li>Tracks faction pools (rock, paper, scissors)</li>
<li>Manages epoch timing and settlement</li>
<li>Holds yield pool for distribution</li>
</ul>
<p><strong>DepositReceipt</strong> - User-owned NFT proving deposit</p>
<ul>
<li>Contains: amount, faction choice, epoch ID, depositor address</li>
<li>Required for withdrawal</li>
</ul>
<p><strong>AdminCap</strong> - Capability for privileged functions</p>
<ul>
<li>Used for <code>inject_yield()</code> (testnet demo only)</li>
</ul>
<p><strong>Key Functions:</strong></p>
<ul>
<li><code>deposit(vault, coin, faction)</code> → Join a faction</li>
<li><code>withdraw(vault, receipt)</code> → Claim principal + yield (if winner)</li>
<li><code>settle_epoch(vault)</code> → Calculate winner, start new epoch (anyone can call)</li>
<li><code>inject_yield(admin_cap, vault, coin)</code> → Add mock yield (admin only)</li>
</ul>
<h3 id="frontend-nextjs-14">Frontend (Next.js 14)</h3>
<ul>
<li><strong>Framework:</strong> Next.js with App Router</li>
<li><strong>Styling:</strong> Tailwind CSS</li>
<li><strong>Wallet:</strong> OneWallet SDK integration</li>
<li><strong>Data:</strong> Real-time on-chain object fetching for live faction percentages</li>
</ul>
<h2 id="technical-highlights">Technical Highlights</h2>
<ol>
<li><strong>Object-Oriented Design</strong> - Leverages OneChain's Move object model (DepositReceipt NFTs) instead of EVM balance mappings</li>
<li><strong>Principal Protection</strong> - 100% guaranteed return via smart contract logic</li>
<li><strong>Infinite Epochs</strong> - Automated cycle renewal, no redeployment needed</li>
<li><strong>Skill-Based Gaming</strong> - Victory depends on analyzing liquidity flows and game theory, not random chance</li>
</ol>
<h2 id="quick-start">Quick Start</h2>
<p>See <a href="./QUICKSTART.md">QUICKSTART.md</a> for complete deployment and testing instructions.</p>
<p><strong>Test the contract:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Check vault status</span>
one client object 0xbeeb3463d50eec7704cd8b8bb8443f4eda38116c1bc8c46b6c240388c77546d9

<span class="hljs-comment"># Make a deposit (Rock faction)</span>
one client call \
  --package 0xbe5ff682041431df2eb1033bee50f8ee81708dd74084b48ec8a69d490ba68762 \
  --module game_vault \
  --<span class="hljs-keyword">function</span> deposit \
  --args 0xbeeb3463d50eec7704cd8b8bb8443f4eda38116c1bc8c46b6c240388c77546d9 &lt;COIN_ID&gt; 0 \
  --gas-budget 10000000
</div></code></pre>
<h2 id="project-structure">Project Structure</h2>
<pre class="hljs"><code><div>OneTriangle/
├── Backend/
│   ├── sources/
│   │   └── game_vault.move          # Smart contract
│   ├── Move.toml                     # Package config
│   └── deployment.json               # Deployment data
├── Frontend/
│   ├── app/                          # Next.js pages
│   ├── components/                   # React components
│   └── .env.local                    # Contract IDs
└── README.md                         # This file
</div></code></pre>
<h2 id="innovation">Innovation</h2>
<p><strong>Positive-Sum Gaming:</strong> Unlike traditional gambling, wealth is created (yield generation), not transferred from losers. Everyone gets their principal back.</p>
<p><strong>DeFi Engagement:</strong> Combines financial incentives with strategic gameplay, solving DeFi's retention problem without unsustainable token emissions.</p>
<p><strong>Move Showcase:</strong> Demonstrates OneChain's object capabilities, shared objects, and capability-based access control.</p>
<hr>
<p><strong>Built for OneChain Hackathon 2025</strong></p>

</body>

</html>